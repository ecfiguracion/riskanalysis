<template>
    <div>
        <h1>Assessment</h1>
        
        <div class="row">
            <div class="col-md-6">
                <form @submit.prevent="">
                    <div class="form-group">
                        <button class="btn btn-default" @click="onSave">Save</button>
                        <button class="btn btn-default" @click="onCancel">Cancel</button>      
                    </div>
                </form> 
            </div>
        </div>
        <div class="row">
            <ul class="nav nav-tabs">    
               <li v-bind:class="{ active: selectedTab == 0 }"  @click="onSelectedTab(0)">
                    <a href="#" @click.prevent="">Typhoon</a>
              </li>                            
              <li v-bind:class="{ active: selectedTab == 1 }"  @click="onSelectedTab(1)">
                <a href="#" @click.prevent="">Populations</a>
              </li>
              <li v-bind:class="{ active: selectedTab == 2 }" @click="onSelectedTab(2)">
                <a href="#" @click.prevent="">Properties</a>
              </li>
              <li v-bind:class="{ active: selectedTab == 3 }" @click="onSelectedTab(3)">
                <a href="#" @click.prevent="">Lifelines</a>
              </li>
              <li v-bind:class="{ active: selectedTab == 4 }" @click="onSelectedTab(4)">
                <a href="#" @click.prevent="">Agriculture</a>
              </li>
            </ul>                       
        </div>
        <div class="row">
            <div class="col-md-12">
                <!--Typhoon Tab-->                
                <div class="row" v-bind:class="{ showSection: selectedTab == 0, hideSection: selectedTab != 0}">
                    <div class="col-md-6">  
                        <div class="form-group">
                            <label for="typhoon">Typhoon</label>
                            <select id="typhoon" class="form-control" v-model="model.typhoon">
                                <option v-for="item in typhoonsLookUp" v-bind:value="item">
                                    {{ item.name }}
                                </option>
                            </select>
                        </div>     
                        <div class="form-group">
                            <label for="remarks">Remarks</label>
                            <input type="text" class="form-control" id="remarks" v-model="model.remarks">
                        </div>                                             
                    </div>  
                </div>
                <!--End: Typhoon Tab-->

                <!--Population Tab-->
                <div class="row" v-bind:class="{ showSection: selectedTab == 1, hideSection: selectedTab != 1}">        
                    <div>
                        <h5 class="inline-section"><a href="#" @click.prevent="addNewPopulation"><span class="fa fa-plus fa-lg"></span> New </a></h5>        
                        <h5 class="inline-section"><a href="#" @click.prevent="removePopulation"><span class="fa fa-trash-o fa-lg"></span> Remove </a></h5>        
                    </div>
                    <table class="table table-condensed table-hover table-striped">
                        <thead>
                            <tr>
                                <th>Entities</th>
                                <th>Barangay</th>
                                <th>Total</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="item in model.population">
                                <template v-if="!item.isdeleted">
                                    <td> {{ item.entity.name }} </td>
                                    <td> {{ item.barangay.name }} </td>
                                    <td> {{ item.total }} </td>
                                    <td>
                                        <a href="#" @click.prevent="onEditPopulation(item)">Edit |</a> 
                                        <a href="#" @click.prevent="onRemovePopulation(item)">Delete</a>                                     
                                    </td>
                                </template>
                            </tr>                            
                        </tbody>
                    </table>       
                    <populationForm/>                             
                </div>                
                <!--Population Tab--> 

                <!--Properties Tab-->
                <div class="row" v-bind:class="{ showSection: selectedTab == 2, hideSection: selectedTab != 2}">        
                    <div>
                        <h5 class="inline-section"><a href="#" @click.prevent="addNewProperties"><span class="fa fa-plus fa-lg"></span> New </a></h5>        
                        <h5 class="inline-section"><a href="#" @click.prevent="removeProperties"><span class="fa fa-trash-o fa-lg"></span> Remove </a></h5>        
                    </div>
                    <table class="table table-condensed table-hover table-striped">
                        <thead>
                            <tr>
                                <th>Structures</th>
                                <th>Barangay</th>
                                <th>Is Totally Damaged?</th>
                                <th>Is Critically Damaged?</th>
                                <th>Estimated Cost</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr v-for="item in model.properties">
                                <template v-if="!item.isdeleted">
                                    <td> {{ item.structure.name }} </td>
                                    <td> {{ item.barangay.name }} </td>
                                    <td class="text-center"> 
                                        <span v-if="item.isTotallyDamaged" class="fa fa-check"></span> 
                                        <span v-if="!item.isTotallyDamaged" class="fa fa-square-o"></span>
                                    </td>
                                    <td class="text-center"> 
                                        <span v-if="item.isCriticallyDamaged" class="fa fa-check"></span>
                                        <span v-if="!item.isCriticallyDamaged" class="fa fa-square-o"></span>
                                    </td>
                                    <td> {{ item.estimatedCost }} </td>
                                    <td>
                                        <a href="#" @click.prevent="onEditProperties(item)">Edit |</a> 
                                        <a href="#" @click.prevent="onRemoveProperties(item)">Delete</a>                                     
                                    </td>
                                </template>
                            </tr>                            
                        </tbody>
                    </table>       
                    <propertiesForm/>                             
                </div>                 
                <!--Properties Tab-->

                <!--Lifelines Tab-->
                <div class="row" v-bind:class="{ showSection: selectedTab == 3, hideSection: selectedTab != 3}">        
                    <div class="row">
                        <div>
                            <h5 class="inline-section"><a href="#" @click.prevent="addNewTransportation"><span class="fa fa-plus fa-lg"></span> New </a></h5>        
                            <h5 class="inline-section"><a href="#" @click.prevent="removeTransportation"><span class="fa fa-trash-o fa-lg"></span> Remove </a></h5>        
                        </div>
                        <table class="table table-condensed table-hover table-striped">
                            <thead>
                                <tr>
                                    <th>Facilities</th>
                                    <th>Description</th>
                                    <th>Location</th>
                                    <th>Is Passable?</th>
                                    <th>Length (KM)</th>
                                    <th>Estimated Cost</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="item in model.transportation">
                                    <template v-if="!item.isdeleted">
                                        <td> {{ item.facility.name }} </td>
                                        <td> {{ item.description }} </td>
                                        <td> {{ item.barangay.name }} </td>
                                        <td class="text-center"> 
                                            <span v-if="item.isPassable" class="fa fa-check"></span> 
                                            <span v-if="!item.isPassable" class="fa fa-square-o"></span>
                                        </td>
                                        <td> {{ item.lengthKM }} </td>                                    
                                        <td> {{ item.estimatedCost }} </td>
                                        <td>
                                            <a href="#" @click.prevent="onEditTransportation(item)">Edit |</a> 
                                            <a href="#" @click.prevent="onRemoveTransportation(item)">Delete</a>                                     
                                        </td>
                                    </template>
                                </tr>                            
                            </tbody>
                        </table>       
                        <transportationForm/>   
                    </div>                          
                </div>                   
                <!--Lifelines Tab-->

                <!--Agriculture Tab-->
                <!--Agriculture Tab-->                
            </div>
        </div>
    </div>
 
</template>

<script src="./form.ts"></script>
